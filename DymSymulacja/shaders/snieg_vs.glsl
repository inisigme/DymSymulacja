//////////////////////////////////////////////////////////////////////
// (c) Janusz Ganczarski
// http://www.januszg.hg.pl
// JanuszG@enter.net.pl
//////////////////////////////////////////////////////////////////////

//////////////////////////////////////////////////////////////////////
// GLSL 3.30
//////////////////////////////////////////////////////////////////////
#version 330

//////////////////////////////////////////////////////////////////////
// iloczyn macierzy modelu-widoku i macierzy rzutowania
//////////////////////////////////////////////////////////////////////
uniform mat4 modelViewProjectionMatrix;

//////////////////////////////////////////////////////////////////////
// rozmiar punktu
//////////////////////////////////////////////////////////////////////
uniform float pointSize;

//////////////////////////////////////////////////////////////////////
// numery indeksów poszczególnych atrybutów wierzcho³ków
//////////////////////////////////////////////////////////////////////
#define POSITION  0

//////////////////////////////////////////////////////////////////////
// wspó³rzêdne wierzcho³ka i numer p³atka œniegu
//////////////////////////////////////////////////////////////////////
layout( location = POSITION ) in vec4 inPosition;

//////////////////////////////////////////////////////////////////////
// numer tekstury p³atka œniegu
//////////////////////////////////////////////////////////////////////
flat out float snowFlake;

//////////////////////////////////////////////////////////////////////
// program g³ówny
//////////////////////////////////////////////////////////////////////
void main()
{
    // standardowe przekszta³cenie wierzcho³ków
    gl_Position = modelViewProjectionMatrix * vec4( inPosition.xyz, 1.0 );

    // numer tekstury p³atka œniegu
    snowFlake = inPosition.w;

    // wielkoœæ punktu modulowana przez wartoœæ
    // trzeciej wspó³rzêdnej jego po³o¿enia
    gl_PointSize = 70.0;
}
