//////////////////////////////////////////////////////////////////////
// (c) Janusz Ganczarski
// http://www.januszg.hg.pl
// JanuszG@enter.net.pl
//////////////////////////////////////////////////////////////////////

//////////////////////////////////////////////////////////////////////
// GLSL 1.50
//////////////////////////////////////////////////////////////////////
#version 150

//////////////////////////////////////////////////////////////////////
// uchwyt tablicy tekstur 2D
//////////////////////////////////////////////////////////////////////
uniform sampler2DArray tex;

//////////////////////////////////////////////////////////////////////
// numer tekstury p³atka œniegu
//////////////////////////////////////////////////////////////////////
flat in float snowFlake;

//////////////////////////////////////////////////////////////////////
// wyjœciowy kolor fragmentu
//////////////////////////////////////////////////////////////////////
out vec4 outColor;

//////////////////////////////////////////////////////////////////////
// program g³ówny
//////////////////////////////////////////////////////////////////////
void main()
{
    // próbkowanie tekstury
    vec4 color = texture( tex, vec3( gl_PointCoord, snowFlake ) );

    // test przezroczystoœci teksela
   if( color.r + color.g + color.b < 1.5 )
  discard;
  else
        outColor = vec4(color.xyz, 0.0001);
}
